{"version":3,"sources":["maps-backend.js"],"names":["translation","arguments","length","undefined","close","address","overlay","document","createElement","querySelector","addEventListener","parentNode","removeChild","createEditorContainer","container","editMarker","data","displayWindow","displayInfo","content","delete","save","editor","Object","defineProperty","exports","createNavigationButton","image","setAttribute","navigation","insertBefore","separator","nextSibling","module","createRandomId"],"mappings":"qcAECA,GAAAC,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,IAAAG,MAAA,GAAAC,QACG,IACMC,EAAAC,SAAFC,cAAA,kYAGQ,0FAAgBF,KAGPG,cAHO,0BAAAC,iBAAA,QAAA,oBAINC,WAAMC,YACRN,KAEwBA,qGAVxC,QAAAO,GAAAC,iCAqBsCX,KAAAF,UAAA,GAAAA,UAAA,yBAvB7C,OAAAE,KAAAF,UAAA,GAAAA,UAAA,+BA0B+C,qCArBhB,sCAAA,2DAAAD,EAAAI,MAAA,kHAAAJ,EAAAe,WAAA,0GAAAf,EAAAK,QAAA,6FAAAL,EAAAK,QAAA,6CAAAW,EAAAX,QAAA,6KAAAW,EAAAC,cAAA,qBAAA,IAAA,wDAAAjB,EAAAkB,YAAA,qIAAAlB,EAAAmB,QAAA,6FAAAnB,EAAAmB,QAAA,KAAAH,EAAAG,QAAA,uKAAAnB,EAAAoB,OAAA,0EAAApB,EAAAqB,KAIN,uFAJMC,mBAAA,0BAAAZ,iBAAA,QAAA,+BAMME,YAwBNU,KAtBIA,EAKHC,OAAAC,eAAAC,EAPK,qBAQQ,IAENA,EAAAZ,sBArBvCA,0BAoDgC,QAAAa,GAAAC,EAAAb,yBA1CgD,+FAAzDP,SAAAC,cALQ,SAAhBoB,aAAA,QAAA,0IA+B2B,yFAuBnBrB,SAAAC,cAAJ,qCAhBa,oCACqBqB,gBAAtBC,aAAAC,EAAAF,EAAAG,aACIH,EAFHN,OAAAC,eAAAC,EAhCK,qBASF,IA0BIA,EAAAC,uBADGA,qBAwBZO,EAAPR,GArExB,QAAAS,8CAwEiBX,OAAAC,eAAAC,EAAA,qBAtET,IADJA,EAAAS,eAAAA","file":"maps-backend.js","sourcesContent":["import GoogleMapEditor from './blocks/maps/modules/GoogleMapEditor';\n\n(function ($) {\n    $.entwine('ss', function ($) {\n        $('*[data-module=\"editor\"]').entwine({\n            onmatch: function () {\n\n                window.editor = {\n                    readyApi: false,\n                    instance: null,\n                    api: $(this).data('key'),\n                    init: () => {\n                        window.editor.instance = new GoogleMapEditor($(this)[0], {\n                            closures: {\n                                onMarkerPlaced: (instance, marker) => {\n                                    $.ajax({\n                                        url: $(this).data('update-marker-link'),\n                                        method: 'GET',\n                                        data: marker.getData()\n                                    })\n                                },\n                                onMarkerSave: (instance, marker) => {\n                                    $.ajax({\n                                        url: $(this).data('update-marker-link'),\n                                        method: 'GET',\n                                        data: marker.getData()\n                                    })\n                                },\n                                onMarkerDelete: (instance, marker) => {\n                                    $.ajax({\n                                        url: $(this).data('delete-marker-link'),\n                                        method: 'GET',\n                                        data: {\n                                            InstanceId: marker.options.instanceId\n                                        }\n                                    })\n                                },\n                                onZoomChanged: (instance, zoomLevel) => {\n                                    $.ajax({\n                                        url: $(this).data('zoom-changed-link'),\n                                        method: 'GET',\n                                        data: {\n                                            zoom: zoomLevel\n                                        }\n                                    })\n                                },\n                                onCoordinatesChanged: (instance, coordinates) => {\n                                    $.ajax({\n                                        url: $(this).data('coordinates-changed-link'),\n                                        method: 'GET',\n                                        data: {\n                                            coordinates: coordinates\n                                        }\n                                    })\n                                }\n                            }\n                        });\n                    }\n                };\n\n                if (!window.editor.readyApi) {\n                    if ($('#google-maps-api').length <= 0) {\n                        let script = document.createElement('script');\n\n                        script.id = 'google-maps-api';\n                        script.type = 'text/javascript';\n                        script.src = `//maps.googleapis.com/maps/api/js?key=${window.editor.api}&libraries=places&callback=window.editor.init`;\n\n                        document.body.appendChild(script);\n                        window.editor.readyApi = true;\n                    } else {\n                        window.editor.readyApi = true;\n                        window.editor.init();\n                    }\n                }\n            }\n        });\n    });\n})(jQuery);"]}